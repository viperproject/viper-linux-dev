#!/bin/bash

DIR=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
source "$DIR/settings.sh"

TEST_DIR="$(readlink -f "$1")"
DOCKER_TEST_DIR="${DOCKER_HOME}/test"

SBT="${DOCKER_SBT} 'test-only -- -Dpath=${DOCKER_TEST_DIR}'"

${DOCKER_COMMAND} \
  -v "$(pwd):${DOCKER_SOURCE_DIR}" \
  -v "${TEST_DIR}:${DOCKER_TEST_DIR}" \
  "${DOCKER_IMGAGE}" \
  /bin/bash -c "cd ${DOCKER_SOURCE_DIR}/silicon && ${SBT}"
