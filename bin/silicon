#!/bin/bash

DIR=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
source "$DIR/settings.sh"

SILVER_FILE="$(readlink -f "$1")"
DOCKER_SILVER_FILE="${DOCKER_HOME}/file.sil"

SBT="${DOCKER_SBT} 'run ${DOCKER_SILVER_FILE}'"

${DOCKER_COMMAND} \
  -v "$(pwd):${DOCKER_SOURCE_DIR}" \
  -v "${SILVER_FILE}:${DOCKER_SILVER_FILE}" \
  "${DOCKER_IMGAGE}" \
  /bin/bash -c "cd ${DOCKER_SOURCE_DIR}/silicon && ${SBT}"
